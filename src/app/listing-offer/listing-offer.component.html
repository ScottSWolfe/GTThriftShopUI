<mat-expansion-panel class="offer-panel">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <a routerLink="/users/{{offer.user._id}}">{{offer.user.firstName}} {{offer.user.lastName}}</a>
    </mat-panel-title>
    <mat-panel-description>$ {{offer.price}}</mat-panel-description>
  </mat-expansion-panel-header>
  <div class="offer-message" *ngFor="let message of offer.messages; let i = index"
       [ngStyle]="{'margin-top': i === 0 ? '0' : '12px'}">
    <span class="offer-message-name">
      <span *ngIf="offer.user._id === message.author; else authorIsListingOwner">
        {{offer.user.firstName}} {{offer.user.lastName}}:
      </span>
      <ng-template #authorIsListingOwner>
        {{listingOwner.firstName}} {{listingOwner.lastName}}:
      </ng-template>
    </span>
    <span>{{message.text}}</span>
  </div>
  <span *ngIf="offer.messages.length === 0">No messages yet</span>
  <form class="offer-panel-message-form">
    <mat-form-field class="offer-panel-message-field">
      <input matInput required placeholder="Message" type="text" title="Message" name="message" [(ngModel)]="message"
             (keyup.enter)="onSubmit()">
      <mat-error>Please enter a message.</mat-error>
    </mat-form-field>
    <button mat-raised-button id="button-post-message" color="primary" (click)="onSubmit()"
            [disabled]="submitDisabled">
      Post
    </button>
  </form>
</mat-expansion-panel>
