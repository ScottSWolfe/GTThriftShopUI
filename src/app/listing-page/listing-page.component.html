<div id="listing-page-container">
  <mat-toolbar id="listing-page-toolbar" class="toolbar">
    <mat-toolbar-row>
      <mat-form-field>
        <mat-select placeholder="Category" [(value)]="selectedCategory">
          <mat-option *ngFor="let category of categories" [value]="category">
            {{ category }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <input matInput type="search" placeholder="Search">
      </mat-form-field>
      <mat-form-field>
        <mat-select placeholder="Sort by" [(value)]="selectedSort">
          <mat-option *ngFor="let sort of sorts" [value]="sort.params" (click)="list()">
            {{ sort.text }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </mat-toolbar-row>
  </mat-toolbar>
  <mat-card class="listing-card" *ngFor="let listing of listings">
      <div class="listing-image">
        <img src="{{listing.imageUrl}}" />
      </div>
      <div class="listing-text">
        <div class="listing-name">
          <a routerLink="/listing">{{listing.name}}</a>
        </div>
        <div class="listing-seller">
          <a href="#">{{listing.user.firstName}} {{listing.user.lastName}}</a>
          - {{(listing.user.positiveRatings && listing.user.totalRatings) ? (listing.user.positiveRatings / listing.user.totalRatings * 100).toFixed(0) + "% positive ratings" : "Not Rated"}}
        </div>
        <div class="listing-description">
          {{listing.description}}
        </div>
      </div>
      <div class="listing-price">
        {{(listing.price) ? '$'+(listing.price) : ''}}
      </div>
  </mat-card>
</div>
