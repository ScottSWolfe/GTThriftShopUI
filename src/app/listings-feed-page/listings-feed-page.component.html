<mat-card class="listing-card" *ngFor="let listing of listings" routerLink="/listings/{{listing._id}}">
  <div class="listing-image">
    <img src="{{listing.imageUrl}}" />
  </div>
    <div class="listing-text">
      <div class="listing-name">
        <a routerLink="/listings/{{listing._id}}">{{listing.name}}</a>
      </div>
    <div class="listing-seller">
      <a routerLink="/users/{{listing?.user?._id}}">{{listing.user.firstName}} {{listing.user.lastName}}</a> -
      {{
        (listing.user.positiveRatings && listing.user.totalRatings)
        ? (listing.user.positiveRatings / listing.user.totalRatings * 100).toFixed(0) + "% positive ratings"
        : "Not Rated"
      }}
    </div>
    <div class="listing-description">
      {{listing.description}}
    </div>
  </div>
  <div class="listing-price">
    {{(listing.price) ? '$'+(listing.price) : ''}}
  </div>
  <a>
    <mat-icon class="listing-flag-button" (click)="openFlagModal(listing)">flag</mat-icon>
  </a>
</mat-card>
